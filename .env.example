# ISO 20022 Payments Middleware - Environment Variables (PoC)

# ---------- Blockchain (Flare mainnet / Coston2 testnet) ----------
# Default to Flare mainnet. For testing, you may point to Coston2 instead.
# Mainnet:
FLARE_RPC_URL=https://flare-api.flare.network/ext/C/rpc
# Coston2 testnet (testing only):
# FLARE_RPC_URL=https://coston2-api.flare.network/ext/C/rpc

# Deployed EvidenceAnchor contract address for your environment
# Mainnet (from contracts/EvidenceAnchor.deployed.json):
ANCHOR_CONTRACT_ADDR=0xb59f0d6077A15a3778C262264a83A54B9ABbdEff
# Coston2 testnet example (testing only, replace with your deployed address):
# ANCHOR_CONTRACT_ADDR=0xYourDeployedContractAddress

# Private key used to send anchor transactions (NEVER COMMIT REAL KEYS)
# For Docker Compose, this is passed through the environment only.
ANCHOR_PRIVATE_KEY=0xYourPrivateKey

# ABI file path for the contract
ANCHOR_ABI_PATH=contracts/EvidenceAnchor.abi.json

# Number of blocks to look back when searching for events
ANCHOR_LOOKBACK_BLOCKS=50000

# ---------- Database ----------
# In Docker Compose this is set automatically for the api service.
# For local dev (without Docker), you can use Postgres or fall back to SQLite.
# Example Postgres local:
# DATABASE_URL=postgresql+psycopg2://iso_user:iso_pass@localhost:5432/iso_mw
# Example SQLite (dev only):
# DATABASE_URL=sqlite:///./dev.db

# Toggle SQLAlchemy echo logs (0/1)
SQL_ECHO=0

# ---------- API / UI ----------
# CORS origin allowed for your web UI / frontend (comma-separate if needed)
# Example for Railway/Cloud: WEB_ORIGIN=https://your-ui.example.com
WEB_ORIGIN=http://localhost:8501

# Directory to store artifacts (served under /files)
ARTIFACTS_DIR=artifacts

# Local API base URL for tools / scripts
API_BASE_URL=http://localhost:8000
# Public base URL to prefix artifact links in callbacks (set to your API domain in production)
# Example: PUBLIC_BASE_URL=https://api.your-domain
PUBLIC_BASE_URL=http://localhost:8000

# Verify endpoint behavior
# If set to 1 and ANCHOR_PRIVATE_KEY is configured, /v1/iso/verify will attempt auto-anchoring when not found on-chain
VERIFY_AUTO_ANCHOR=0

# ---------- API Keys / Admin ----------
# Admin token required to issue/list/revoke API keys (Admin UI uses X-Admin-Token)
ADMIN_TOKEN=change-me-admin
# Optional: pepper for hashing API keys at rest
API_KEY_HASH_SECRET=some-random-string

# ---------- Signing (Ed25519) ----------
# By default, the service will create a dev keypair under ./.keys
# To provide your own keys, set the following to file paths:
# SERVICE_PRIVATE_KEY=.keys/service_sk.hex     # hex-encoded 32-byte seed
# SERVICE_PUBLIC_KEY=.keys/service_pk.pem      # PEM-encoded public key
